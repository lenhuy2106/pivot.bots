<#import "../layout/defaultLayout.ftl.html" as layout> 
<@layout.myLayout "Home page">    


<h1>${i18n("dialogue")} <span class="glyphicon glyphicon-transfer"></span></h1>
<p>${i18n("dialogue.description")}</p>

<div style="display: inline-block;">
    <div class="dialogue">
        <#list messages?reverse as item>
        <div class="talk-bubble ${['tri-right', 'own'][item_index % 2]} round right-top">
                <div class="talktext">
                    <p>
                        ${item}
                    </p>
                </div>
            </div>
        </#list>
    </div>
</div>

<div class="bot-info">
    <div><b>${currentBot}</b></div>
    <canvas id="wordcloud"></canvas>
</div>

<form id="chat-input" class="input" action="/dialogue" method="post">
    Chat: <input style="width:300px;" type="text" name="text" autofocus>
    <input id="send-button" type="submit" value="Enter">
</form>

<form class="input" action="/dialogue?skip=true" method="post">
    <input type="hidden" name="text" value="I don't understand the question.">
    <input id="skip-button" type="submit" value="&quot;I don't understand the question.&quot;">
</form>

<script>
    WordCloud(document.getElementById('wordcloud'), { 
        list: [
            <#list vocab as word>
                ['${word}', 5],
            </#list>
        ],
//        backgroundColor: 'gainsboro',
        backgroundColor: 'transparent',
        color: 'darksalmon',
        gridSize: 0,
        drawOutOfBound: true,
//        drawMask: true,
        weightFactor: 1,
        shape: function(theta) {
            var max = 115;
            var leng = [87,89,90,91,92,92,93,94,94,94,95,95,97,98,99,102,103,103,104,104,106,106,107,107,108,108,108,108,109,109,108,109,109,109,111,111,112,112,113,113,113,114,113,114,114,114,114,115,114,115,115,115,115,115,115,114,114,114,114,114,113,113,113,113,113,112,112,111,111,111,111,110,111,111,111,111,111,111,111,111,111,111,110,111,110,110,110,109,110,109,109,108,109,108,107,106,106,105,104,105,104,105,105,104,104,104,104,104,104,104,104,104,104,103,104,104,103,104,103,103,102,102,103,102,102,102,101,101,101,100,101,100,100,99,99,99,99,98,97,97,97,97,98,97,97,98,98,98,98,98,99,98,98,99,99,99,98,98,98,98,98,98,98,97,97,97,96,96,96,95,95,94,95,94,95,93,93,93,94,94,95,95,95,96,96,97,98,98,98,99,99,99,98,99,99,100,100,99,100,100,100,101,101,100,100,100,100,100,100,100,99,99,99,99,100,98,98,98,97,98,96,97,96,97,96,97,98,97,98,98,99,99,99,100,100,99,100,100,100,101,100,100,101,101,100,101,101,100,101,100,101,100,100,100,100,99,100,99,99,99,99,98,98,97,96,96,97,96,98,98,98,99,99,100,99,100,101,101,101,102,101, 102, 102, 102, 102, 102, 102, 102, 102, 102, 101, 101, 101, 102, 103, 102, 103, 103, 103, 104, 104, 103, 103, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 104, 103, 103, 102, 102, 102, 101, 101, 101, 101, 101, 101, 102, 101, 101, 101, 101, 101, 101, 101, 101, 100, 101, 100, 100, 99, 99, 98, 98, 97, 97, 96, 96, 96, 94, 94, 92, 92, 90, 89, 89, 89, 89, 90, 90, 91, 91, 92, 92, 92, 93, 93, 92, 93, 93, 93, 93, 94, 93, 93, 93, 93, 94, 93, 93, 94, 93, 93, 93, 92, 92, 92, 92, 91, 92, 91, 90, 90, 89, 89, 89, 88, 87, 88, 87, 88, 86, 85, 86, 85, 84, 85, 83, 84, 82, 81, 82, 80, 79, 78, 78, 77, 77, 75, 76, 76, 76, 77, 77, 76, 76, 75, 76, 75, 74, 74, 75, 76, 78, 81, 83, 85, 88, 91, 92, 93, 93, 95, 96, 96, 96, 97, 98, 99, 99, 99, 100, 101, 102, 103, 103, 66, 63, 61, 62, 58, 57, 58, 55, 54, 55, 53, 54, 52, 53, 51, 52, 50, 51, 50, 51, 49, 50, 48, 49, 47, 48, 47, 46, 47, 44, 45, 45, 42, 41, 43, 41, 39, 38, 36, 35, 34, 36, 35, 34, 36, 35, 34, 36, 37, 37, 36, 37, 38, 38, 39, 39, 38, 40, 39, 39, 40, 41, 40, 41, 42, 42, 41, 42, 43, 43, 42, 43, 44, 44, 45, 46, 45, 47, 46, 47, 48, 47, 48, 49, 49, 48, 49, 50, 49, 49, 50, 51, 51, 51, 52, 53, 51, 52, 53, 54, 55, 54, 55, 54, 55, 56, 57, 58, 56, 57, 58, 57, 58, 59, 60, 59, 60, 61, 61, 61, 61, 62, 63, 62, 63, 64, 63, 64, 64, 65, 65, 66, 65, 66, 66, 67, 66, 66, 67, 67, 68, 67, 68, 67, 68, 69, 69, 68, 69, 68, 69, 69, 69, 70, 69, 69, 69, 70, 69, 70, 70, 70, 70, 71, 79, 79, 82, 84, 86, 86, 89];
                    return leng[(theta / (2 * Math.PI)) * leng.length | 0] / max;
        }
    });
</script>

</@layout.myLayout>
